{"version":3,"file":"smartsettings.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import style from './index.css'\n\n/**\n * @class SmartSettings\n * @classdesc SmartSettings module, returns new SmartSettings instance\n * @param {string} name - name of the SmartSettings panel\n * @param {number} left - position of the SmartSettings panel on X axis\n * @param {number} top - position of the SmartSettings panel on Y axis\n * @example\n * const mySettings = new SmartSettings('My Settings', 10, 10)\n*/\nclass SmartSettings {\n    constructor(name = 'SmartSettings', left = 0, top = 0) {\n        this.name = name\n        this.left = left\n        this.top = top\n\n        /**\n         * @property {boolean} _hidden\n         * @private\n         */\n        this._hidden = false\n\n        /**\n         * @property {boolean} _open\n         * @private\n         */\n        this._open = true\n\n        /**\n         * @property {boolean} _draggable\n         * @private\n         */\n        this._draggable = false\n\n        /**\n         * @property {Node} _panel\n         * @private\n         */\n        this._panel = null\n\n        /**\n         * @property {object} _controls\n         * @private\n         */\n        this._controls = {}\n\n        this._createUniqueId()\n        this._create(this.name, this.top, this.left)\n    }\n\n    /* Utility methods */\n\n    /**\n     * Creates unique element identifier\n     * @private\n     */\n    _createUniqueId() {\n        let counter = 0\n        window.uniqueId = () => `sms-id-${counter++}`\n    }\n     \n    /**\n     * Creates any DOM element\n     * @param {string} type - type of the DOM element\n     * @param {Object} attributes - object with all attributes for the DOM element\n     * @returns {Node}\n     * @private \n     */\n    _createElement(type, attributes) {\n        let element = document.createElement(type)\n        if (attributes) {\n            for (let key in attributes) {\n                if (key === 'class') {\n                    element.setAttribute('class', attributes[key])\n                } else {\n                    element[key] = attributes[key]\n                }\n            }\n        }\n        return element\n    }\n\n\n    /* Helper methods */\n\n    /**\n     * Creates settings panel, invoked on class construction\n     * @returns {void}\n     * @private\n     */\n    _create() {\n        let panelAttributes = {\n            class: 'sms-panel',\n            id: uniqueId(),\n            style: `top: ${this.top}px; left: ${this.left}px; z-index: 2`\n        }\n        let panel = this._createElement('div', panelAttributes)\n        let header = this._createElement('div', { class: 'sms-panel-header' })\n        let body = this._createElement('div', { class: 'sms-panel-body' })\n        let paragraph = this._createElement('p', { class: 'sms-panel-header-name' })\n\n        header.addEventListener('click', e => this.toggle())\n\n        paragraph.innerText = this.name\n        header.appendChild(paragraph)\n        panel.appendChild(header)\n        panel.appendChild(body)\n        this._panel = panel\n        document.body.appendChild(this._panel)\n    }\n\n    /**\n     * Creates basic properties for the new control\n     * @returns {object}\n     * @private\n     */\n    _createControlBasics() {\n        let id = uniqueId()\n        let basics = {\n            id: id,\n            disabled: false,\n            hidden: false,\n            element: function() {\n                return document.getElementById(this.id)\n            },\n            enable: function() {\n                this.element().removeAttribute('disabled')\n                this.disabled = false\n            },\n            disable: function() {\n                this.element().setAttribute('disabled', true)\n                this.disabled = true\n            },\n            show: function() {\n                if (this.element().classList[2] === 'hide') {\n                    this.element().classList.remove('hide')\n                    this.hidden = false\n                }\n            },\n            hide: function() {\n                if (this.element().classList[2] !== 'hide') {\n                    this.element().classList.add('hide')\n                    this.hidden = true\n                }\n            },\n            remove: function() {\n                delete self._controls[name]\n                this.element().remove()\n            }\n        }\n        return basics\n    }\n\n    /* Basic methods */\n\n    /**\n     * Removes settings panel from the DOM and removes all sections and controls\n     * @returns {void}\n     * @example\n     * mySettings.destroy()\n     */\n    destroy() {\n        if (this._panel && this._panel.parentElement) {\n            this._panel.parentElement.removeChild(this._panel)\n        }\n        this._panel = null\n        this._controls = {}\n    }\n\n    /**\n     * Shows settings panel\n     * @returns {void}\n     * @example\n     * mySettings.show()\n     */\n    show() {\n        this._panel.classList.remove('hide')\n        this._hidden = false\n    }\n\n    /**\n     * Hides settings panel\n     * @returns {void}\n     * @example\n     * mySettings.hide()\n     */\n    hide() {\n        this._panel.classList.add('hide')\n        this._hidden = true\n    }\n\n    /**\n     * Open settings panel\n     * @example\n     * mySettings.open()\n     */\n    open() {\n        let panelBody = this._panel.childNodes[1]\n        if (panelBody.classList[1] === 'hide') {\n            panelBody.classList.remove('hide')\n        } \n        this._open = true\n    }\n\n    /**\n     * Close settings panel\n     * @example\n     * mySettings.close()\n     * \n     */\n    close() {\n        let panelBody = this._panel.childNodes[1]\n        panelBody.classList.add('hide')\n        this._open = false\n    }\n\n    /**\n     * Open or close settings panel depending on `_open` property\n     * @example\n     * mySettings.toggle()\n     */\n    toggle() {\n        let panelBody = this._panel.childNodes[1]\n        panelBody.classList[1] === 'hide' ?\n            panelBody.classList.remove('hide') :\n            panelBody.classList.add('hide')\n        this._open = !this._open\n    }\n\n    /**\n     * Returns panel position [left, top]\n     * @return {array<number>}\n     * @example\n     * let position = mySettings.getPosition() // [0, 0]\n     */\n    getPosition() {\n        return [this.left, this.top]\n    }\n\n    /**\n     * Sets panel position\n     * @param {number} left - new position on the X axis\n     * @param {number} top - new position on the Y axis\n     * @example\n     * mySettings.setPosition(400, 400)\n     */\n    setPosition(left, top) {\n        this.left = left\n        this.top = top\n    }\n\n    /**\n     * Creates button control\n     * @param {string} name - name of the control \n     * @param {function} callback - function executed on each change\n     * @returns {object} button control object\n     */\n    button(name, callback) {\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let element = this._createElement('button', { \n            class: 'sms-control sms-button', \n            id: base.id \n        })\n\n        element.innerText = name\n        element.addEventListener('click', callback)\n\n        base.getValue = function() {\n            return base.element().innerText\n        }\n        \n        body.appendChild(element)\n        this._controls[name] = base\n        return this._controls[name]\n    }\n}\n\nexport default SmartSettings"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","SmartSettings","name","left","top","_hidden","_open","_draggable","_panel","_controls","_createUniqueId","_create","counter","window","uniqueId","attributes","element","key","setAttribute","panelAttributes","class","id","panel","_createElement","header","body","paragraph","addEventListener","toggle","innerText","basics","disabled","hidden","getElementById","enable","removeAttribute","disable","show","classList","remove","hide","add","self","parentElement","removeChild","panelBody","childNodes","callback","base","_createControlBasics","getValue"],"mappings":"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"}