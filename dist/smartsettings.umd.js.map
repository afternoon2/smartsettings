{"version":3,"file":"smartsettings.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import style from './index.css'\n\n/**\n * @class SmartSettings\n * @classdesc SmartSettings module, returns new SmartSettings instance\n * @param {string} name - name of the SmartSettings panel\n * @param {number} left - position of the SmartSettings panel on X axis\n * @param {number} top - position of the SmartSettings panel on Y axis\n * @example\n * const mySettings = new SmartSettings('My Settings', 10, 10)\n*/\nclass SmartSettings {\n    constructor(name = 'SmartSettings', left = 0, top = 0) {\n        this.name = name\n        this.initialLeft = left\n        this.initialTop = top\n\n        /**\n         * @property {boolean} _hidden\n         * @private\n         */\n        this._hidden = false\n\n        /**\n         * @property {boolean} _open\n         * @private\n         */\n        this._open = true\n\n        /**\n         * @property {boolean} _draggable\n         * @private\n         */\n        this._draggable = false\n\n        /**\n         * @property {Node} _panel\n         * @private\n         */\n        this._panel = null\n\n        /**\n         * @property {object} _controls\n         * @private\n         */\n        this._controls = {}\n\n        /**\n         * @property {?function} _globalWatcher\n         * @private\n         */\n        this._globalWatcher = null\n\n        this._createUniqueId()\n        this._create(this.name, this.initialTop, this.initialLeft)\n    }\n\n    /* Utility methods */\n\n    /**\n     * Creates unique element identifier\n     * @private\n     */\n    _createUniqueId() {\n        let counter = 0\n        window.uniqueId = () => `sms-id-${counter++}`\n    }\n     \n    /**\n     * Creates any DOM element\n     * @param {string} type - type of the DOM element\n     * @param {Object} attributes - object with all attributes for the DOM element\n     * @returns {Node}\n     * @private \n     */\n    _createElement(type, attributes) {\n        let element = document.createElement(type)\n        if (attributes) {\n            for (let key in attributes) {\n                if (key === 'class') {\n                    element.setAttribute('class', attributes[key])\n                } else {\n                    element[key] = attributes[key]\n                }\n            }\n        }\n        return element\n    }\n\n    /**\n     * Calls the global watcher\n     * @param {EventListenerObject} event - an event\n     * @returns {void}\n     * @private\n     */\n    _callGlobalWatcher(e) {\n        if (this._globalWatcher) {\n            this._globalWatcher(e)\n        }\n    }\n\n    /* Helper methods */\n\n    /**\n     * Creates settings panel, invoked on class construction\n     * @returns {void}\n     * @private\n     */\n    _create() {\n        let panelAttributes = {\n            class: 'sms-panel',\n            id: uniqueId(),\n            style: `top: ${this.initialTop}px; left: ${this.initialLeft}px; z-index: 2`\n        }\n        let panel = this._createElement('div', panelAttributes)\n        let header = this._createElement('div', { class: 'sms-panel-header' })\n        let body = this._createElement('div', { class: 'sms-panel-body' })\n        let paragraph = this._createElement('p', { class: 'sms-panel-header-name' })\n\n        header.addEventListener('click', e => this.toggle())\n\n        paragraph.innerText = this.name\n        header.appendChild(paragraph)\n        panel.appendChild(header)\n        panel.appendChild(body)\n        this._panel = panel\n        document.body.appendChild(this._panel)\n    }\n\n    /**\n     * Creates basic properties for the new control\n     * @returns {object}\n     * @private\n     */\n    _createControlBasics() {\n        let id = uniqueId()\n        let basics = {\n            id: id,\n            disabled: false,\n            hidden: false,\n            value: null,\n            name: null,\n            type: null,\n            element: function() {\n                return document.getElementById(this.id)\n            },\n            enable: function() {\n                this.element().removeAttribute('disabled')\n                this.disabled = false\n            },\n            disable: function() {\n                this.element().setAttribute('disabled', true)\n                this.disabled = true\n            },\n            show: function() {\n                if (this.element().classList[1] === 'hide') {\n                    this.element().classList.remove('hide')\n                    this.hidden = false\n                }\n            },\n            hide: function() {\n                if (this.element().classList[1] !== 'hide') {\n                    this.element().classList.add('hide')\n                    this.hidden = true\n                }\n            }\n        }\n        return basics\n    }\n\n    /**\n     * Returns select option\n     * @param {(string|number)} item - option value\n     * @returns {Node}\n     * @private\n     */\n    _createSelectOption(item) {\n        let option = this._createElement('option', {\n            class: 'sms-select-option',\n            value: item\n        })\n        option.innerText = item\n        return option\n    }\n\n    /* Basic methods */\n\n    /**\n     * Removes settings panel from the DOM and removes all sections and controls\n     * @returns {void}\n     * @example\n     * mySettings.destroy()\n     */\n    destroy() {\n        if (this._panel && this._panel.parentElement) {\n            this._panel.parentElement.removeChild(this._panel)\n        }\n        this._panel = null\n        this._controls = {}\n    }\n\n    /**\n     * Shows settings panel or specific control (if the name is provided)\n     * @param {string} [name] - name of control to be shown\n     * @returns {void}\n     * @example\n     * mySettings.show()\n     */\n    show(name) {\n        if (name) {\n            this._controls[name].show()\n        }\n        this._panel.classList.remove('hide')\n        this._hidden = false\n    }\n\n    /**\n     * Hides settings panel or specific control (if the name is provided)\n     * @param {string} [name] - name of control to be hidden\n     * @returns {void}\n     * @example\n     * mySettings.hide()\n     */\n    hide(name) {\n        if (name) {\n            this._controls[name].hide()\n        }\n        this._panel.classList.add('hide')\n        this._hidden = true\n    }\n\n    /**\n     * Enables specific control\n     * @param {string} name\n     * @returns {void}\n     * @example\n     * mySettings.enable('Checkbox control')\n     */\n    enable(name) {\n        if (name && this._controls[name]) {\n            return this._controls[name].enable()\n        }\n    }\n\n    /**\n     * Disables specific control\n     * @param {string} name\n     * @returns {void}\n     * @example\n     * mySettings.enable('Checkbox control')\n     */\n    disable(name) {\n        if (name && this._controls[name]) {\n            return this._controls[name].disable()\n        }\n    }\n\n    /**\n     * Open settings panel\n     * @example\n     * mySettings.open()\n     */\n    open() {\n        let panelBody = this._panel.childNodes[1]\n        if (panelBody.classList[1] === 'hide') {\n            panelBody.classList.remove('hide')\n        } \n        this._open = true\n    }\n\n    /**\n     * Close settings panel\n     * @example\n     * mySettings.close()\n     * \n     */\n    close() {\n        let panelBody = this._panel.childNodes[1]\n        panelBody.classList.add('hide')\n        this._open = false\n    }\n\n    /**\n     * Open or close settings panel depending on `_open` property\n     * @returns {void}\n     * @example\n     * mySettings.toggle()\n     */\n    toggle() {\n        let panelBody = this._panel.childNodes[1]\n        panelBody.classList[1] === 'hide' ?\n            panelBody.classList.remove('hide') :\n            panelBody.classList.add('hide')\n        this._open = !this._open\n    }\n\n    /**\n     * Returns panel position [left, top]\n     * @return {array<number>}\n     * @example\n     * let position = mySettings.getPosition() // [0, 0]\n     */\n    getPosition() {\n        return [this.initialLeft, this.initialTop]\n    }\n\n    /**\n     * Sets panel position\n     * @param {number} left - new position on the X axis\n     * @param {number} top - new position on the Y axis\n     * @example\n     * mySettings.setPosition(400, 400)\n     */\n    setPosition(left, top) {\n        this.initialLeft = left\n        this.initialTop = top\n    }\n\n    /**\n     * Removes specific control\n     * @param {string} name - name of the control to be deleted\n     * @returns {void}\n     * @example\n     * mySettings.remove('Control name')\n     */\n    remove(name) {\n        if (name) {\n            let elem = this._controls[name].element()\n            elem.parentElement.remove()\n            elem.remove()\n            delete this._controls[name]\n        }\n    }\n\n    /**\n     * Get value of specific control\n     * @param {string} name - name of the control\n     * @returns {(number|string|boolean)}\n     * @example\n     * let value = mySettings.getValue('Control name')\n     */\n    getValue(name) {\n        if (name && this._controls[name] && this._controls[name].getValue) {\n            return this._controls[name].getValue()\n        }\n    }\n\n    /**\n     * Sets new active value of the specific control. (Changing button control value does not change its' id property)\n     * @param {string} name - name of the control\n     * @param {(number|string|boolean)} name - new value\n     * @returns {void}\n     * @example\n     * mySettings.setValue('Control name', 'value')\n     */\n    setValue(name, value) {\n        if (name && this._controls[name] && this._controls[name].setValue) {\n            return this._controls[name].setValue(value)\n        }\n    }\n\n    /**\n     * Get all active values\n     * @returns {object} - an object with values from all currently set controls\n     * @example\n     * let values = mySettings.getActiveValues()\n     */\n    getActiveValues() {\n        let values = {}\n        for (let i in this._controls) {\n            if (this._controls[i].getValue) {\n                values[i] = this._controls[i].getValue()\n            }\n        }\n        return values\n    }\n\n    /**\n     * Get select/range/progressbar items\n     * @param {string} name - name of the control\n     * @returns {array}\n     * @example\n     * let selectValues = mySettings.\n     */\n    getItems(name) {\n        let typeCondition = (\n            this._controls[name].type === 'range' || \n            this._controls[name].type === 'select' || \n            this._controls[name].type === 'progressbar'\n        )\n        if (this._controls[name] && typeCondition) {\n            return this._controls[name].getItems()\n        } else {\n            throw new Error('Chosen control is not a range, select or progressbar type')\n        }\n    }\n\n    /**\n     * Set (update) select/range/progressbar items\n     * @param {string} name - name of the control\n     * @param {array} items - array of new items\n     * @returns {void}\n     * @example\n     * mySettings.setItems('Select', [1, 2, 3, 4])\n     */\n    setItems(name, items) {\n        let typeCondition = (\n            this._controls[name].type === 'range' ||\n            this._controls[name].type === 'select' ||\n            this._controls[name].type === 'progressbar'\n        )\n        if (this._controls[name] && typeCondition) {\n            return this._controls[name].setItems(items)\n        } else {\n            throw new Error('Chosen control is not a range, select or progressbar type')\n        }\n    }\n\n    /**\n     * Creates button control\n     * @param {string} name - name of the control \n     * @param {function} callback - function executed on each change\n     * @returns {object} button control object\n     * @example\n     * let button = mySettings.button('Button Name', () => console.log('This is the button'))\n     */\n    button(name, callback) {\n        let self = this\n        let base = this._createControlBasics()\n        let body = this._panel.childNodes[1]\n        let wrapper = this._createElement('div', {\n            class: 'sms-control'\n        })\n        let button = this._createElement('button', {\n            class: 'sms-button',\n            id: base.id\n        })\n        base.type = 'button'\n        base.name = name\n        button.innerText = name\n        button.value = name\n        button.addEventListener('click', e => {\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        wrapper.appendChild(button)\n        body.appendChild(wrapper)\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates text input control\n     * @param {string} name - name of the control\n     * @param {string} value - value of the control\n     * @param {function} [callback] - function executed on each change\n     * @returns {object}\n     * @example\n     * let textInput = mySettings.text('Text input', 'Hello world')\n     */\n    text(name, value, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        let input = this._createElement('input', {\n            class: 'sms-text',\n            id: base.id,\n            type: 'text'\n        })\n        input.innerText = value\n        input.value = value\n        input.placeholder = value\n        base.name = name\n        base.value = value\n        base.type = 'text'\n        label.innerText = name\n        wrapper.appendChild(label)\n        wrapper.appendChild(input)\n        input.addEventListener('input', e => {\n            base.value = e.target.value\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        body.appendChild(wrapper)\n        base.getValue = function() {\n            return this.element().value\n        }\n        base.setValue = function(value) {\n            base.value = value\n            base.element().innerText = value\n            base.element().value = value\n        }\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates textarea control\n     * @param {string} name - name of the control\n     * @param {string} value - value of the control\n     * @param {function} [callback] - function executed on each change\n     * @returns {object}\n     * @example\n     * let textarea = mySettings.textarea('Text input', 'Hello world')\n     */\n    textarea(name, value, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        let textarea = this._createElement('textarea', {\n            class: 'sms-textarea',\n            id: base.id\n        })\n        textarea.innerText = value\n        textarea.value = value\n        textarea.placeholder = value\n        base.name = name\n        base.value = value\n        base.type = 'text'\n        label.innerText = name\n        wrapper.appendChild(label)\n        wrapper.appendChild(textarea)\n        textarea.addEventListener('input', e => {\n            base.value = e.target.value\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        body.appendChild(wrapper)\n        base.getValue = function () {\n            return this.element().value\n        }\n        base.setValue = function (value) {\n            base.value = value\n            base.element().innerText = value\n            base.element().value = value\n        }\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates range control\n     * @param {string} name - name of the control\n     * @param {array} items - array with min, max, default and step values\n     * @param {function} [callback] - function executed on each change\n     * @returns {object}\n     * @example\n     * let range = mySettings.range('Range', [1, 100, 40, 1], e => console.log(e.target.value))\n     */\n    range(name, items, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        let span = this._createElement('span', { class: 'sms-label-span' })\n        let input = this._createElement('input', {\n            class: 'sms-range',\n            id: base.id,\n            type: 'range',\n            min: items[0],\n            max: items[1],\n            value: items[2],\n            step: items[3]\n        })\n\n        base.type = 'range'\n        base.name = name\n        base.value = items[2]\n        input.addEventListener('input', e => {\n            base.value = e.target.value\n            span.innerText = base.value\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        span.innerText = base.value\n        label.value = name\n        label.innerText = name\n        label.appendChild(span)\n        wrapper.appendChild(label)\n        wrapper.appendChild(input)\n        body.appendChild(wrapper)\n        base.getValue = function() {\n            return parseFloat(base.element().value)\n        }\n        base.setValue = function(v) {\n            base.value = v\n            base.element().value = v\n        }\n        base.getItems = function() {\n            let e = base.element()\n            return [\n                parseFloat(e.min),\n                parseFloat(e.max),\n                parseFloat(e.value),\n                parseFloat(e.step),\n            ]\n        }\n        base.setItems = function(items) {\n            let e = base.element()\n            e.min = items[0]\n            e.max = items[1]\n            e.value = items[2]\n            e.step = items[3]\n            base.value = parseFloat(e.value)\n        }\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates checkbox control\n     * @param {string} name - name of the control\n     * @param {boolean} value - value of the control\n     * @param {function} [callback] - function executed on each change\n     * @returns {object}\n     * @example\n     * let checkbox = mySettings.checkbox('Check this out!', true, e => {\n     *      console.log(e.target.value)\n     * })\n     */\n    checkbox(name, value, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        let checkbox = this._createElement('input', {\n            class: 'sms-checkbox',\n            id: base.id,\n            type: 'checkbox'\n        })\n        base.name = name\n        base.type = 'checkbox'\n        base.value = value\n        label.innerText = name\n        label.value = name\n        if (value === true) {\n            checkbox.setAttribute('checked', true)\n        }\n        checkbox.addEventListener('change', e => {\n            base.value = e.target.checked\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        wrapper.appendChild(label)\n        wrapper.appendChild(checkbox)\n        body.appendChild(wrapper)\n        base.getValue = function() {\n            return base.element().checked\n        }\n        base.setValue = function(v) {\n            base.element().checked = v\n            base.value = v\n        }\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates color control\n     * @param {string} name - name of the control\n     * @param {string} value -hexadecimal string value of initial color\n     * @param {function} [callback] - function executed afer each change\n     * @returns {object}\n     * @example\n     * let color = mySettings.color('Color control', '#fcfcfc', e => someCallbackFunction())\n     */\n    color(name, value, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        let span = this._createElement('span', { class: 'sms-label-span' })\n        let input = this._createElement('input', {\n            class: 'sms-color',\n            id: base.id,\n            type: 'color'\n        })\n        base.name = name\n        base.type = 'color'\n        base.value = value\n        input.setAttribute('value', value)\n        input.addEventListener('input', e => {\n            base.value = e.target.value\n            span.innerText = e.target.value\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        span.innerText = value\n        label.value = name\n        label.innerText = name\n        label.appendChild(span)\n        wrapper.appendChild(label)\n        wrapper.appendChild(input)\n        body.appendChild(wrapper)\n        base.getValue = function() {\n            return base.element().value\n        }\n        base.setValue = function(v) {\n            base.element().value = v\n            base.value = v\n            span.innerText = v\n        }\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates select control\n     * @param {string} name - name of the control\n     * @param {array} items - array with option values\n     * @param {function} [callback] - function executed on each change\n     * @returns {object}\n     * @example\n     * let select = mySettings.select('Select', ['Option 1', 'Option 2', 'Option 3'])\n     */\n    select(name, items, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        let select = this._createElement('select', {\n            class: 'sms-select',\n            id: base.id,\n            name: name\n        })\n        label.innerText = name\n        label.value = name\n        wrapper.appendChild(label)\n        items.map(item => {\n            let option = self._createSelectOption(item)\n            select.options.add(option)\n        })\n        select.value = items[0]\n        select.addEventListener('change', e => {\n            base.value = e.target.value\n            if (callback) {\n                callback(e)\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        wrapper.appendChild(select)\n        body.appendChild(wrapper)\n        base.value = items[0]\n        base.name = name\n        base.type = 'select'\n        base.getValue = function() {\n            let _select = base.element()\n            return _select.options[_select.selectedIndex].value\n        }\n        base.setValue = function(v) {\n            base.value = v\n            let _select = base.element()\n            select.options[select.selectedIndex] = self._createSelectOption(v)\n            _select.value = v\n        }\n        base.getItems = function() {\n            return Array\n                .from(base.element().options)\n                .map(option => option.value)\n        }\n        base.setItems = function(items) {\n            let _select = base.element()\n            items.forEach(item => {\n                let _index = items.indexOf(item)\n                _select.options[_index] = self._createSelectOption(item)\n            })\n        }\n        this._controls[name] = base\n        return this._controls[name]\n    }\n\n    /**\n     * Creates number control\n     * @param {string} name - name of the control\n     * @param {array} items - array with initial and step value\n     * @param {function} [callback] - function executed on each change\n     * @returns {object}\n     * @example\n     * let number = mySettings.number('Number', [10, 1], e => {})\n     */\n    number(name, items, callback) {\n        let self = this\n        let body = this._panel.childNodes[1]\n        let base = this._createControlBasics()\n        let wrapper = this._createElement('div', { class: 'sms-control' })\n        let label = this._createElement('label', { class: 'sms-label' })\n        label.innerText = name\n        label.value = name\n        let input = this._createElement('input', {\n            class: 'sms-number',\n            id: base.id,\n            type: 'number',\n            value: items[0],\n            step: items[1]\n        })\n        input.addEventListener('input', e => {\n            base.value = parseFloat(e.target.value)\n            if (callback) {\n                callback(parseFloat(e))\n            }\n            if (self._globalWatcher !== null) {\n                self._callGlobalWatcher(e)\n            }\n        })\n        base.type = 'number'\n        base.name = name\n        base.value = items[0]\n        base.getValue = function() {\n            return parseFloat(base.element().value)\n        }\n        base.setValue = function(v) {\n            base.element().value = v\n            base.value = v\n        }\n        wrapper.appendChild(label)\n        wrapper.appendChild(input)\n        body.appendChild(wrapper)\n        this._controls[name] = base\n        return this._controls[name] = base\n    }\n    /**\n     * Watch panel for changes and fire callback on each change\n     * @param {function} callback - function executed on each change in the panel\n     * @returns {void}\n     * @example\n     * mySettings.watch(callback)\n     */\n    watch(callback) {\n        this._globalWatcher = callback\n    }\n}\n\nexport default SmartSettings"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","SmartSettings","name","left","top","initialLeft","initialTop","_hidden","_open","_draggable","_panel","_controls","_globalWatcher","_createUniqueId","_create","counter","window","uniqueId","attributes","element","key","setAttribute","e","panelAttributes","class","id","panel","_createElement","header","body","paragraph","addEventListener","toggle","innerText","basics","disabled","hidden","value","getElementById","enable","removeAttribute","disable","show","classList","remove","hide","add","item","option","parentElement","removeChild","panelBody","childNodes","elem","getValue","setValue","values","i","typeCondition","getItems","Error","items","setItems","callback","self","base","_createControlBasics","wrapper","button","_callGlobalWatcher","label","input","placeholder","target","textarea","span","min","max","step","parseFloat","v","checkbox","checked","select","map","_createSelectOption","options","_select","selectedIndex","Array","from","forEach","_index","indexOf"],"mappings":"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"}